(function(exports){var _global,sortjs=function(data,fieldList,inplace){var array;if(data.constructor===Array){array=inplace?data:data.slice(0);array.sort(getObjectSorter(fieldList))}else if(data.constructor===Object){array=Object.keys(data);array.sort(getObjectSorter(fieldList,{context:data}))}else{throw new Error("Sorry, don't know how to sort this kind of things")}return array};try{_global=window}catch(e){_global=global}function getObjectSorter(fieldList,args){if(!fieldList||!fieldList.constructor||fieldList.constructor!==Array){return function(){}}if(args&&args.get&&typeof args.get!=="function"){throw new Error("'get' argument is not a function")}if(args&&args.context&&typeof args.context!=="object"){throw new Error("'context' argument is not an object")}return function(a,b){var i,ai,bi,sf,dir,opt,options,context;for(i=0;i<fieldList.length;i++){sf=fieldList[i];dir=1;options={};if(sf.indexOf("-")===0){sf=sf.substr(1);dir=-1}if(sf.indexOf(":")===1){opt=sf.split(":");options[opt[0]]=true;sf=opt[1]}if(args&&args.get){context={context:this,field:sf,dir:dir,options:options};context.element=a;ai=args.get(context);context.element=b;bi=args.get(context)}else if(args&&args.context){ai=args.context[a][sf];bi=args.context[b][sf]}else{ai=typeof a==="object"?a[sf]:a;bi=typeof b==="object"?b[sf]:b}if(options&&options.s){ai=ai.toString();bi=bi.toString()}else if(options&&options.i){ai=ai.toString().toLowerCase();bi=bi.toString().toLowerCase()}if(options&&options.f){ai=parseFloat(ai);bi=parseFloat(bi)}else if(options&&options.n){ai=parseInt(ai);bi=parseInt(bi)}if(ai<bi){return-dir}else if(ai>bi){return dir}}return 0}}function improve(inplace){improveArray(inplace);improveObject()}function improveArray(inplace){_global.Array.prototype.sortjs=function(fieldList){var array=inplace?this:this.slice(0);array.sort(getObjectSorter(fieldList));return array}}function improveObject(){_global.Object.prototype.sortjs=function(fieldList){var array=Object.keys(this);array.sort(getObjectSorter(fieldList,{context:this}));return array}}function clear(){clearArray();clearObject()}function clearArray(){delete _global.Array.prototype.sortjs}function clearObject(){delete _global.Object.prototype.sortjs}exports.getObjectSorter=getObjectSorter;exports.improve=improve;exports.improveArray=improveArray;exports.improveObject=improveObject;exports.clear=clear;exports.clearArray=clearArray;exports.clearObject=clearObject;exports.sort=sortjs})(typeof exports==="undefined"?this["sortjs"]={}:exports);